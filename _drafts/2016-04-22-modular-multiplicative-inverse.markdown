---
layout: post
title:  "나머지 곱셈 연산의 역원"
categories: jekyll update
---

## 나머지 연산이란?

$$ 7\;\%\;5 = 2 $$ 와 같이 a를 b로 나눈 나머지인 r을 얻기 위한 연산을 의미하며, 연산은 $$ a\;\%\;b=r $$ 혹은 $$ a\;mod\;b=r $$로 표현한다.
기본적으로 나머지 연산은 **덧셈, 뺄셈, 곱셈**에 대해 ``분배법칙``이 성립하여 아래와 같은 식이 성립한다.

1. $$ (a + b)\;\%\;m = ((a\;\%\;m) + (b\;\%\;m))\;\%\;m $$<br>
1. $$ (a - b)\;\%\;m = ((a\;\%\;m) - (b\;\%\;m))\;\%\;m $$<br>
1. $$ (a * b)\;\%\;m = ((a\;\%\;m) * (b\;\%\;m))\;\%\;m $$<br>

하지만, **나눗셈**은 분배법칙이 성립하지 않는다.
그렇다면 나눗셈과 나머지 연산이 결합하면 방법이 없는 것일까?

결론적으로 말하면 아니다. 단지 형태가 우리가 생각하는 결합법칙과는 조금 다를 뿐 풀 수 있는 방법이 존재한다.

## 나눗셈과 나머지 연산의 분배법칙

$$ (a\;/\;b)\;\%\;m $$

위와 같은 경우가 있다고 가정하자. 이를 나눗셈보다 나머지 연산을 먼저하여 답을 구할 수 있을까?<br>
그럼 일단 나눗셈은 바로 전개가 되지 않는다고 했으니, 전개가 되는 연산인 곱셈으로 바꿔 생각해보자.
그럼 위의 식이 아래와 같이 변한다.

$$ (a * b^{-1})\;\%\;m = ((a\;\%\;m) * (b^{-1}\;\%\;m)) $$

그렇다면 이제 위처럼 곱셈에 대해서 분배법칙을 적용할 수 있고, $$ (b^{-1}\;\%\;m) $$ 에 대해서만 해결할 수 있다면 나눗셈과의 분배법칙도 해결할 수 있다.

문제의 식은 많은 수학자들이 증명하여 만들어놓은 아래와 같은 공식을 이용하여 전개할 수 있고, $$ b^{m-2} $$는 항상 정수범위에 존재하므로 나머지연산에 대한 답을 어렵지 않게 구할 수 있다.

$$ b^{-1}\;\%\;m = b^{m - 2}\;\%\;m $$

``단, 역원이 존재하기 위해서는 m이 소수(prime number)여야 한다.``

결과적으로 위의 조건이 만족한다면 나눗셈에 대한 나머지 연산 결합법칙은 아래와 전개할 수 있다.

$$ \therefore\;\;(a\;/\;b)\;\%\;m = ((a\;\%\;m) * (b^{m - 2}\;\%\;m) $$


## 곱셈의 역원에 대한 증명

많은 사람들이 **왜??** 라는 생각을 많이 했을 것이다.
전혀 어떻게 저 식이 나왔는지도 상상이 안갈 것이다.

수학자들이 저 식을 증명한 방법은 2가지가 있다.

1. **확장 유클리드 호제법 (Extended Euclidean Algorithm)**<br>
1. **페르마의 소정리 (Fermat's Little Theorem)**

여기서는 그 두가지 방법의 증명을 설명해볼까 한다.

### 확장 유클리드 호제법 (Extended Euclidean Algorithm)

Extended Euclid’s Algorithm은 gcd(a,b)를 구하는 것에서 출발하여 확장된 개념으로 gcd(a, b) = ax + by의 형태의 식은 항상 존재하고 x, y도 구할수 있다라는 것이 알고리즘의 핵심입니다.
Euclid's Algorithm에서 Extended Euclid's Algorithm을 증명해가는 과정은 첨부된 pdf를 참조하시면 쉽게 이해하실 수 있습니다. (증명: xeuclid.pdf )
(만약에 Euclid's Algorithm에 대한 증명이 궁금하신 분들은 wikipedia를 참고하시기 바랍니다.)
이 때, 서로소인 관계 즉, gcd(a, b) == 1인 경우를 생각해보면 나머지 연산에 대한 정수범위 곱셈의 역원을 구할 수 있습니다.
ab = 1 (mod M) 일 때 b을 a의 곱셈에 대한 역원으로 정의할 수 있는데, 이 식은 아래와 같이 표현할 수 있습니다.
xM + ab = gcd(M, a) 형태로 식을 변형할 수 있고, 이 때, M, a가 서로소 관계 즉 gcd(M, a) == 1 이라면 해당 등식이 성립하여 b가 a의 곱셈에 대한 역원으로 사용될 수 있습니다.


### 페르마의 소정리 (Fermat's Little Theorem)

페르마의 소정리는 a^(p-1) = 1 (mod p) 를 의미하는 것인데, 증명은 아래와 같습니다.
{ 1, 2, 3, 4, ... , p - 2, p - 1 } = { a, 2a, 3a, 4, ... , a(p - 2), a(p - 1) } ( mod p)  (단, a는 p와 서로소의 관계여야 함)
즉, 1~p-1의 수의 나머지를 전부 구하면 그에 서로소의 관계인 a를 곱하더라도 그 집합은 1~p-1이 된다. 이는 그림을 그려서 생각해보면 간단히 생각해볼 수 있는데, 이에 대한 증명은 생략하겠습니다. 궁금하신분은 다음 시간에 말씀해주시면 설명드리겠습니다.
따라서 위의 식이 증명됐다고 가정하면 아래식이 성립합니다.
1 * 2 * 3 * ... * (p-1) = (p-1)! = a^(p-1)(p-1)! (mod p)
1 = a^(p-1) (mod p)
a^(-1) = a^(p-2) (mod p)
따라서 우리가 원했던 a^(-1)을 구할 수 있게 됩니다.


